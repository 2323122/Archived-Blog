---
title: Nim博弈 学习报告
categories: 学习报告
date: 2019-03-05 16:56:50
tags: 
    - 博弈论
    - Nim博弈
top:
toc: true
---
# Nim取石子游戏
甲，乙两个人玩Nim取石子游戏。
nim游戏的规则是这样的：地上有n堆石子（每堆石子数量小于10000），每人每次可从任意一堆石子里取出任意多枚石子扔掉，可以取完，不能不取。每次只能从一堆里取。最后没石子可取的人就输了。假如甲是先手，且告诉你这n堆石子的数量，他想知道是否存在先手必胜的策略。

<!--more-->

## 结论
Nim博弈先手必胜，当且仅当：
$$XOR_{a_1}^{a_n}=0$$

## 证明

（此部分搬运 [y2823774827y](https://www.luogu.org/space/show?uid=88804)的题解，在此对原作者表示敬意）

用比较通俗的方式讲一下吧： 题目本意是给出n堆石子，轮流在其中一堆去任意个，谁不能去谁就输。

思路：证明所有石子异或和为0则先手必输

证明：

1. 反正最终情况就是每堆都为0，先手必输，所以我们考虑怎么把情况转换到这里。

2. 如果异或和的最高位为i，则有一堆石子第i为为1（不然怎么会有i位）

3. 设A1就为那堆石子，其他堆石子异或和设为x，总异或和设为k，则 A1 xor x=k，把A1变成A1 xor k，那么后手面对的则是（A1 xor k）xor x=0，

   举个例子:11001 xor 11100=101，则有（11001 xor 101）xor 11100=0

4. 如果现在的异或和已经为0了（不为最终情况），那么怎么转换异或和都不能为0

5. 好，我们根据3 4点得出：如果先手异或和不为0，可以一步让后手的情况为异或和为0；如果先手异或和为0，那么后手异或和就不为0

6. 终于开始进行游戏了，如果现在先手面对的情况异或和不为0，则一直让后手异或和为0，最后面对最终情况，后手输，则先手赢；如果先手面对的情况异或和为0，后手则赢

# SG函数与ICG游戏

这里不讲理论了，论应用的话，我的SG函数多半是打表或者手玩出来的，真正使用所谓$\mathbf {mex}$运算的很少。所以，不妨从实际问题出发，找出SG函数的规律，再对每个SG函数进行异或和。

**先手必胜**的条件为：
$$\oplus_{i = 1}^n\mathbf{SG}(i) != 0$$

## [**例题** UVA1482 Playing With Stones](https://www.luogu.org/problemnew/show/UVA1482)

这是一道典型的打表求SG规律的题。

题解在这：
[Click here]([https://zgjjj.github.io/2019/06/07/UVA1482-Playing-With-Stones-%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/](https://zgjjj.github.io/2019/06/07/UVA1482-Playing-With-Stones-解题报告/))