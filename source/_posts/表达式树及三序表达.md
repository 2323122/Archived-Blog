---
title: 表达式树及三序表达 学习报告
categories: 学习报告
date: 2019-02-13 14:59:30
tags: 
    - 技巧
top:
toc: true
---

# 预备知识

需要了解树的先序、中序、后序遍历

<!--more-->

# 先来看一道题目

![](https://i.loli.net/2019/02/13/5c63c1b262992.jpg)

（源自洛谷有题）

这是2017年TG初赛试题，这篇文章主要讲述如何**快速有效**地解这一类题。

# 关于表达式的三序表达

## 定义

我们用一个例子来说明：

|    名称    |             表达式             |
| :--------: | :----------------------------: |
| 中序表达式 | $2\times 3/(2-1)+3\times(4-1)$ |
| 前序表达式 |      $+/\times23-21*3-41$      |
| 后序表达式 |   $23\times21-/341-\times+$    |

大致明白是什么了叭？

## 意义

有人问：

> 中序表达式这么方便，为什么还要开发~~看不懂的~~前序和后序表达式呢？

原因很简单：
**中序表达式会使用括号**

这将极大程度影响（机器）运算的效率。

那么，对于前序和后序表达式，即使是同样的式子与操作符，不同的优先级都将导致其表达式的不同。也就不存在引用括号的情况。

# 已知一个式子的中序表达，如何求它的前序和后序表达呢？

也很简单。

## 引入一个概念： **表达式树**

我们来它长什么样：

![](https://i.loli.net/2019/02/13/5c63c68026d33.png)

这是表达式${(1+2)-(3\times 4)}$的表达式树。

## 规定

- 表达式树的叶节点**能且仅能**为运算数
- 除叶节点外的节点**全部**为操作符
- 节点的深度与运算的优先级正相关

 根据以上三点，可以得到一个中序表达式的表达式树。

## 转换

通过这颗表达式树，我们很容易将中序表达式转化为**等价**的前序，后序表达式

如何转换？

得到一个中序表达式后，我们先将它转化为一颗表达式树。

例如上面的$(1+2)-(3\times 4)$

 

![](https://i.loli.net/2019/02/13/5c63c68026d33.png)

转化后，对这棵树**先序遍历**，可以得到等价的前序表达式。

同样，对其**后序遍历**，可以得到等价的后序表达式。

这棵树的**中序遍历**，则是我们常用的中序表达式。

